# Dubbo-meetingFilm

## 项目介绍
  项目基于Dubbo+guns+Springboot的仿猫眼的后端微服务架构系统，使用Dubbo做Rpc调用方式，集成guns后台管理系统，使用内置的MyBatisPlus做数据库ORM框架，项目使用了Dubbo的多种特性包括：启动检查、异步调用、并发与连接控制、服务区分、本地伪装、隐式参数等。对于了解Dubbo微服务有一定的借鉴意义。
  
## 模块介绍
   项目集成了guns框架，其核心模块是：guns-core，里面有大量的实用工具类和一些基本配置，该项目共包含了7个模块，其中1.guns-gateway模块，做统一网关模块，用户认证，统一实用Restful接口调用其他模块服务并对外提供Json格式数据，针对服务限流（使用令牌桶算法对订单服务限流），熔断降级（集成Hystrix框架对订单服务降级熔断）。2.guns-api模块，保存所有ServiceApi接口（不提供实现），供其他服务模块依赖，以及需要传输的VO对象（实现可序列化）。3.guns-user用户服务模块，包括一些基础的用户注册，查询接口实现。4.guns-film影片服务模块，包括影片上映查询等。5.guns-cinema影院服务模块，包括影院上映影片的查询。6.guns-order订单服务模块，包括下单，查询订单等。7.guns-alipay 支付服务模块，包括支付（使用支付宝当面付SDK），查询支付情况等。针对于分布式事务问题还未引入，可使用tcc框架，以及阿里开源的fescar分布式事务框架。
   
## jwt token鉴权机制
  jwt token鉴权机制是指若需要请求服务器接口,必须通过AuthController获取一个请求令牌(jwt token),持有jwt token的用户才可以访问服务器的其他资源,如果没有此令牌,则访问接口会直接忽略,请求获取jwt token时,需要携带credenceName和credenceCode(可以是账号密码,可以是手机号验证码等等),校验credenceName和credenceCode成功后,会颁发给客户端一个jwt token还有一个随机字符串,用于传输过程中对数据进行签名用,签名机制请见下面介绍.基于token的鉴权机制类似于http协议也是无状态的,它不需要在服务端去保留用户的认证信息或者会话信息.这就意味着基于token认证机制的应用不需要去考虑用户在哪一台服务器登录了,这就为应用的扩展提供了便利.

## 签名机制
 签名机制是指客户端向服务端传输数据中,对传输数据进行md5加密,并且加密过程中利用Auth接口返回的随机字符串进行混淆加密,并把md5值同时附带给服务端,服务端通获取数据之后对数据再进行一次md5加密,若加密结果和客户端传来的数据一致,则认定客户端请求的数据是没有被篡改的,若不一致,则认为被加密的数据是被篡改的

